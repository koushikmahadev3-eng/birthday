<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Birthday Portal | God Tier</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <style>
        :root { --neon: #00f3ff; --magenta: #ff00ff; --gold: #ffd700; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; color: #fff; font-family: 'Courier New', monospace; overflow-x: hidden; }
        
        #master-layout { display: flex; width: 100vw; height: 100vh; position: fixed; }
        
        /* Left Pane: Cinematic Storytelling */
        #ui-pane {
            width: 45%; height: 100%; padding: 5%;
            display: flex; flex-direction: column; justify-content: center;
            background: linear-gradient(90deg, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
            z-index: 10; pointer-events: auto; overflow-y: scroll; scrollbar-width: none;
        }
        #ui-pane::-webkit-scrollbar { display: none; }
        
        /* Right Pane: WebGL Visualizer */
        #visual-pane { width: 55%; height: 100%; position: relative; }
        #canvas-container { position: absolute; inset: 0; }

        .glass-box {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(0, 243, 255, 0.2);
            padding: 40px; border-radius: 20px; backdrop-filter: blur(15px);
            margin-bottom: 100vh; /* Space for scrolling */
            transform-style: preserve-3d;
        }

        h1.glitch { font-size: 5rem; line-height: 0.8; letter-spacing: -2px; }
        .accent { color: var(--neon); text-shadow: 0 0 20px var(--neon); }

        #entry-gate {
            position: fixed; inset: 0; z-index: 1000; background: #000;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
        }
        .enter-btn {
            background: none; border: 1px solid var(--neon); color: var(--neon);
            padding: 20px 50px; font-size: 1.5rem; cursor: pointer; border-radius: 50px;
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.2); transition: 0.5s;
        }
        .enter-btn:hover { background: var(--neon); color: #000; box-shadow: 0 0 60px var(--neon); }
    </style>
</head>
<body>

    <div id="entry-gate">
        <h2 style="letter-spacing: 15px; margin-bottom: 30px; opacity: 0.5;">ARCHITECT DETECTED</h2>
        <button class="enter-btn" id="gate-trigger">INITIALIZE REALITY</button>
    </div>

    <div id="master-layout">
        <div id="ui-pane">
            <div class="glass-box" id="sec-1">
                <h1 class="glitch">GENESIS<br><span class="accent">NODE</span></h1>
                <p style="margin-top: 20px; opacity: 0.6;">Welcome to the 2026 Celebration Protocol. You are the variable that defines the equation.</p>
            </div>
            <div class="glass-box" id="sec-2">
                <h2 class="accent">QUANTUM GROWTH</h2>
                <p>Every year is a new dimension explored. Your logic is the compass; your passion is the engine.</p>
            </div>
            <div class="glass-box" id="sec-3">
                <h2 class="accent">INFINITY</h2>
                <p>May your compile time be zero and your joy be an infinite loop. Happy Birthday, Legend.</p>
            </div>
        </div>

        <div id="visual-pane">
            <div id="canvas-container"></div>
        </div>
    </div>

    <script>
        // --- GOD TIER ENGINE CONFIG ---
        let scene, camera, renderer, particles, clock, morphObject;
        const container = document.getElementById('canvas-container');

        function initCore() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 5;

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);

            // 1. Quantum Particle Cloud
            const pGeo = new THREE.BufferGeometry();
            const pCount = 20000;
            const pos = new Float32Array(pCount * 3);
            for(let i=0; i<pCount*3; i++) pos[i] = (Math.random() - 0.5) * 15;
            pGeo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
            
            const pMat = new THREE.PointsMaterial({
                size: 0.015, color: 0x00f3ff, transparent: true, opacity: 0.5,
                blending: THREE.AdditiveBlending
            });
            particles = new THREE.Points(pGeo, pMat);
            scene.add(particles);

            // 2. Morphing Sacred Geometry (The "Complexity" item)
            const mGeo = new THREE.IcosahedronGeometry(1.5, 4);
            const mMat = new THREE.MeshPhongMaterial({
                color: 0xff00ff, wireframe: true, emissive: 0x330033
            });
            morphObject = new THREE.Mesh(mGeo, mMat);
            scene.add(morphObject);

            const light = new THREE.PointLight(0xffffff, 1);
            light.position.set(5, 5, 5);
            scene.add(light);
            scene.add(new THREE.AmbientLight(0x404040));

            clock = new THREE.Clock();
            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            const delta = clock.getElapsedTime();

            // Particle movement (Physical jitter)
            particles.rotation.y = delta * 0.05;
            particles.rotation.x = delta * 0.02;

            // Object morphing math
            const vertices = morphObject.geometry.attributes.position.array;
            for(let i=0; i<vertices.length; i+=3) {
                const x = vertices[i];
                const y = vertices[i+1];
                const z = vertices[i+2];
                vertices[i] += Math.sin(delta + x) * 0.001;
            }
            morphObject.geometry.attributes.position.needsUpdate = true;
            morphObject.rotation.y += 0.01;

            renderer.render(scene, camera);
        }

        // --- GSAP SCROLL LOGIC ---
        gsap.registerPlugin(ScrollTrigger);
        
        function initScroll() {
            gsap.to(morphObject.scale, {
                scrollTrigger: { trigger: "#sec-2", scrub: 1 },
                x: 2, y: 2, z: 2
            });
            gsap.to(morphObject.rotation, {
                scrollTrigger: { trigger: "#ui-pane", scrub: 2 },
                z: Math.PI * 2
            });
            gsap.to(particles.material, {
                scrollTrigger: { trigger: "#sec-3", scrub: 1 },
                size: 0.05
            });
        }

        // --- GATE TRIGGER ---
        document.getElementById('gate-trigger').onclick = () => {
            gsap.to("#entry-gate", { y: "-100%", duration: 1.5, ease: "expo.inOut" });
            initCore();
            initScroll();
            // Start Music Logic (Tone.js)
            const synth = new Tone.PolySynth().toDestination();
            Tone.start();
            const loop = new Tone.Loop(time => {
                synth.triggerAttackRelease("C2", "8n", time);
            }, "4n").start(0);
            Tone.Transport.start();
        }

        window.onresize = () => {
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        }
    </script>
</body>
</html>
