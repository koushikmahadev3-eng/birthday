<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Heart Tree | Infinity</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #050505; 
            overflow: hidden; 
            font-family: 'Arial', sans-serif;
        }
        canvas { display: block; }
        
        #overlay {
            position: fixed;
            inset: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            background: rgba(0,0,0,0.9);
            transition: opacity 1.5s ease;
        }

        .btn-glow {
            padding: 20px 40px;
            background: none;
            border: 2px solid #ff3366;
            color: #ff3366;
            font-size: 1.2rem;
            letter-spacing: 5px;
            cursor: pointer;
            border-radius: 50px;
            box-shadow: 0 0 20px rgba(255, 51, 102, 0.4);
            transition: 0.4s;
        }

        .btn-glow:hover {
            background: #ff3366;
            color: #fff;
            box-shadow: 0 0 50px #ff3366;
        }

        #message-box {
            position: fixed;
            top: 20%;
            width: 100%;
            text-align: center;
            z-index: 5;
            pointer-events: none;
        }

        .wish {
            position: absolute;
            width: 100%;
            color: white;
            font-size: 2.5rem;
            font-family: 'Georgia', serif;
            text-shadow: 0 0 20px rgba(255,255,255,0.8);
            opacity: 0;
            transform: translateY(30px);
        }
    </style>
</head>
<body>

    <div id="overlay">
        <button class="btn-glow" id="startBtn">GIVE LIFE</button>
    </div>

    <div id="message-box">
        <div class="wish">Happy Birthday</div>
        <div class="wish">To a Special Soul</div>
        <div class="wish">Keep Shining</div>
        <div class="wish">Like the Stars</div>
    </div>

    <canvas id="canvas"></canvas>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];
        let treeGrown = false;

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        // 1. STAR SYSTEM
        class Star {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.size = Math.random() * 1.5;
                this.blink = Math.random() * 0.02;
                this.a = Math.random();
            }
            draw() {
                this.a += this.blink;
                if(this.a > 1 || this.a < 0) this.blink *= -1;
                ctx.globalAlpha = this.a;
                ctx.fillStyle = "white";
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
                ctx.fill();
            }
        }
        const stars = Array.from({length: 200}, () => new Star());

        // 2. THE GOD-LEVEL HEART TREE (Recursive)
        function drawHeart(x, y, size, color) {
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.bezierCurveTo(x, y - size/2, x - size, y - size/2, x - size, y);
            ctx.bezierCurveTo(x - size, y + size/2, x, y + size, x, y + size);
            ctx.bezierCurveTo(x, y + size, x + size, y + size/2, x + size, y);
            ctx.bezierCurveTo(x + size, y - size/2, x, y - size/2, x, y);
            ctx.fill();
        }

        function drawBranch(x, y, len, angle, branchWidth) {
            ctx.beginPath();
            ctx.save();
            ctx.strokeStyle = "#4d2600"; // Wood color
            ctx.lineWidth = branchWidth;
            ctx.translate(x, y);
            ctx.rotate(angle * Math.PI / 180);
            ctx.moveTo(0, 0);
            ctx.lineTo(0, -len);
            ctx.stroke();

            if (len < 15) {
                // Draw Heart Leaf
                drawHeart(0, -len, 10, `rgba(255, ${Math.random()*100 + 50}, ${Math.random()*150 + 100}, 0.8)`);
                ctx.restore();
                return;
            }

            // Growing logic
            setTimeout(() => {
                drawBranch(0, -len, len * 0.8, angle - 15, branchWidth * 0.7);
                drawBranch(0, -len, len * 0.8, angle + 15, branchWidth * 0.7);
            }, 50);

            ctx.restore();
        }

        // 3. MAIN LOOP
        function animate() {
            ctx.clearRect(0, 0, width, height);
            
            // Background Gradient
            const g = ctx.createRadialGradient(width/2, height/2, 0, width/2, height/2, width);
            g.addColorStop(0, '#1a050d');
            g.addColorStop(1, '#050505');
            ctx.fillStyle = g;
            ctx.fillRect(0,0, width, height);

            stars.forEach(s => s.draw());
            requestAnimationFrame(animate);
        }
        animate();

        // 4. THE SEQUENCE
        document.getElementById('startBtn').addEventListener('click', () => {
            document.getElementById('overlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('overlay').style.display = 'none';
                
                // Grow Tree
                drawBranch(width/2, height, height/4, 0, 10);
                
                // Animate Words
                const wishes = document.querySelectorAll('.wish');
                const tl = gsap.timeline();
                
                wishes.forEach((w, i) => {
                    tl.to(w, { opacity: 1, y: 0, duration: 1.5, ease: "power2.out" })
                      .to(w, { opacity: 0, y: -30, duration: 1, ease: "power2.in" }, "+=1");
                });
            }, 1000);
        });
    </script>
</body>
</html>
